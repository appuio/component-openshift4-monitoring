parameters:
  openshift4_monitoring:
    fallback_team: null

    =_metadata:
      library_aliases:
        prom.libsonnet: openshift4-monitoring-prom.libsonnet
        alert-patching.libsonnet: openshift4-monitoring-alert-patching.libsonnet
      multi_tenant: true

    namespace: openshift-monitoring
    manifests_version: release-4.17
    defaultNodeSelector:
      node-role.kubernetes.io/infra: ''

    components:
      clusterMonitoring:
        # cant be disabled
        alertmanagerIsolationEnabled: true
        externalLabels:
          cluster_id: ${cluster:name}
          cluster_name: ${cluster:display_name}
          tenant_id: ${cluster:tenant}
          tenant_name: ${cluster:tenant_display_name}
        remoteWriteDefaults: {}
        config: {}
      alertManager:
        # cant be disabled
        config: {}
      alertManagerAutoDiscovery:
        enabled: true
        debugConfigMap: false
        teamReceiverFormat: team_default_%s
        additionalAlertMatchers: []
        prependRoutes: []
        appendRoutes: []
      capacityAlerts:
        enabled: true
        groupByNodeLabels: []
      customNodeExporter:
        enabled: false
        collectors: []
        args: []
        metricRelabelings: []
      userWorkloadMonitoring:
        enabled: true
        alertmanagerIsolationEnabled: true
        externalLabels:
          cluster_id: ${cluster:name}-user-workload
          cluster_name: "${cluster:display_name} User Workload"
          tenant_id: ${cluster:tenant}
          tenant_name: ${cluster:tenant_display_name}
        remoteWriteDefaults: {}
        config: {}

    alerts:
      includeNamespaces: []
      excludeNamespaces: []
      ignoreNames: []
      ignoreWarnings: []
      ignoreGroups: []
      customAnnotations: {}
      patchRules:
        release-4.16: {}
        release-4.17: {}
      ignoreUserWorkload: []

    capacityAlerts: {}
    silence: {}
    rules: {}

    cronjobs: {}
    secrets: {}

    images:
      oc:
        registry: quay.io
        repository: appuio/oc
        tag: v4.17
      node_exporter:
        registry: quay.io
        repository: prometheus/node-exporter
        tag: v1.9.0
      kube_rbac_proxy:
        registry: quay.io
        repository: brancz/kube-rbac-proxy
        tag: v0.19.0

    # --- to be replaced with espejote -----------------------------------------

    upstreamRules:
      networkPlugin: openshift-sdn

    jsonnetfile_parameters:
      cmo_version: ${openshift4_monitoring:manifests_version}
      etcd_version: ${openshift4_monitoring:manifests_version}
      # renovate repo=https://github.com/kubernetes/kube-state-metrics
      kube_state_metrics_version: v2.14.0

    # no release branches newer than 4.9 exist
    =_operator_lifecycle_manager_map:
      release-4.16: release-4.9
      release-4.17: release-4.9
